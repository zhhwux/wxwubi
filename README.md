# 万象五笔输入方案

## 方案简介
[万象五笔](https://github.com/zhhwux/wxwubi)是基于[万象方案](https://github.com/amzxyz/rime_wanxiang_pinyin)改造的 Rime 输入方案。结合了五笔强大的离散效果和万象优质词库及模型对整句的优化

核心特性如下：
- 五笔置顶：支持通过开关分别关闭五笔整句、五笔词、五笔单、音码功能
- 灵活反查：提供拆分滤镜、拼音滤镜、自动拆分显示、通配符替代、多种拼音反查方式
- 词库优化：基于万象词库补充大量二码词，结合模型提升五笔句性能

---

## 推荐使用习惯
1. 万象五笔方案：2-4 任意码五笔句 + 五笔单/词，穿插交替上屏  
2. 万象拼音方案：双拼整句 + 五笔单穿插交替上屏  

---

## 核心交互
- （一）快捷键
    - `Control+a`（五笔单开关）/ `Control+s`（五笔词开关）/ `Control+d`（五笔句开关）/ `Control+y`（音码开关）/ `Control+z`（显示拆分）/ `Control+q`（显示注音） 
- （二）拼音反查
    1. 万象五笔的拼音反查是 '单引号前缀  `反引号后缀  ctrl+y开关  三种方式皆可
    2. 默认全拼+五笔辅（可以在wanxiang_pro.schema.yaml更改拼音类型）
    3. 拼音注音滤镜开关 ctrl+q
- （三）五笔造词
    1. 五笔方案按`反引号作为前缀造词（保存在ti.txt）
    2. 五笔4码临时简词功能：只要最近上屏了一段文本(无论上屏文本是用五笔还是拼音打出来的)，就可以在次选用4码五笔词的格式打出这段文字 ，接下来确认上屏的自造词将会被永久化储存在user_words.lua文件中
    3. 个人自定义词典（不参与组句）：在custom_phrase文件夹创建user.txt文件，按照：文本-制表符-编码-制表符-权重数字 的格式编辑
- （四）候选词手动调序
    - 候选词排序调整：选中候选词后 ，按 Ctrl + j 向左移动；按 Ctrl + k 向右移动；按 Ctrl + p 置顶；按 Ctrl + l 清除调序信息。（调序信息储存在lua文件夹的sequence.userdb文件夹）
- （五）输入功能符号
    - 万象五笔方案新增或改动交互
    1. 快符引导 ;前缀 或 o前缀 或 五笔单开启且五笔词关闭时的次选（在custom_phrase/kf.dict.yaml）
    2. 通配符 *  （可将字词句的任意编码使用*取代，用于忘记拆分编码时）
    3. 句中四码单字聚拢 / 斜杠后缀
    4. 句中四码简词聚拢 / 斜杠后缀
    5. 重复上屏 '' 双击单引号
    6. tips上屏 / 斜杠上屏
    7. 分号次选
    8. 拼音方案造词 '单引号前缀
    9. 拼音反查（'前缀或`后缀）和使用*通配符时
    10. 合并输出最近100条上屏记录 '`
    11. 临时输入速度统计：/st开始/en输出统计结果（输入/st并按空格确认空内容开始，输入/en的/斜杠时结束）
    - 万象原生未改动交互
    1. 全类符号引导 /斜杠前缀（在new_symbols.yaml）
    2. V前缀：计算器
    3. N前缀：数字转日期大写
    4. R前缀：数字转金额大写
    5. U前缀：Unicode编码转文字
    6. 7890代表1234声调，轻声归并到4 （用于音码）
    7. Ctrl  +  Del  删除用户词标记
    8. 输入统计：/tj /rtj /ztj /ytj /ntj  统计清理：/tjql
- 其它功能详见 万象五笔-新手教程.docx
---

 ## QQ 群交流及反馈：809597773  
 
---

github更新需与添加模型的rime-wanxiang-wubi-fuzhu方案合并方可使用；
完整更新包在[网盘](https://share.feijipan.com/s/bpHxxlYM)或q群文件

---

## 更新日志
- 7.10：修复手机重复上屏按键事件延迟一步的问题、修复了输入统计lua重新部署即失效的问题、为ios设备适配了自造简词和手动调序的永久化保存逻辑，并优化了重复上屏临时储存维持能力
- 7.2：新增'`前缀合并输出最近100条上屏历史功能、为输入统计增加/st开始/en结束的临时速度统计能力、微调了主题（上划p置顶、上划l复原）、将仓版本`前缀造词保存方式改为db从而修复txt无法保存的问题、跟随万象更新
- 6.30：将官五笔词库由txt改为dict.yaml引用、重构了拼音滤镜、调整了开关和快捷键
- 6.26：添加/前缀希腊字母、将/前缀符号改为外部引用、恢复音码辅码显示开关功能
- 6.23：优化自造简词相关逻辑：限制临时自造词只在先使用正常编码上屏再用简码上屏时才触发永久保存，排除2字词的生成记录，修复无其它全码候选时无法上屏的问题，自动生成调序记录seq_words.lua和自造简词记录user_words.lua文件(使已存在记录免于被更新覆盖)、优化了符号候选词的筛选逻辑、修复了emoji候选的排序错误问题、恢复了拼音方案的快符、微调了主题
- 6.22：新增拼音反查模式和使用通配符时的自动拆分显示功能、新增五笔4码临时自造词的使用后永久化保存能力（保存在user_words.lua）、修复了部分N前缀候选词被过滤的问题、微调了主题、取消使用default.custom.yaml（为了便于用户使用default.custom.yaml不被更新覆盖）、默认关闭了音码方案自动调频、跟随万象更新
- 6.9：新增在五笔单和五笔词开关开启时（五笔句/音码关闭）的四码唯一自动上屏/四码不唯一五码顶屏/空码清屏功能、移除了9键方案的音码和单词等内容、启用Control+Shift+1在最近的两个方案之间切换
- 6.5：修复了‘临时五笔4码简词’相关问题（带符号上屏文本无法转换、无其它候选时临时简词不能存在…等问题）、微调了主题
- 6.4：重构了词典（优化聚拢规则、删除多余词库、添加句中/简词）
- 6.3：新增次选‘临时五笔4码简词’功能（四码打出最近上屏文本）、微调了拆分滤镜、wanxiang方案的自造词保存方式调整为txt
- 5.31：主题适配了同文3.3.4、调整了拆分滤镜、新增在五笔单开关单独开启时（五笔词/五笔句/音码开关关闭）的四码唯一自动上屏/空码清屏功能
- 5.24：修复了自造词相关功能
- 5.21：新增*通配符功能、修复了万象五笔方案/四码聚拢能力、飞机盘新增仓输入法版本：万象五笔-仓
- 5.13：更随万象更新、分离了中英标点和英文单词开关，设置Control+p为英文单词开关
- 5.4：修复了中文输入法无法使用的问题
- 5.2：为万象五笔方案添加了`前缀五笔自造词功能、设置双击'单引号为重复上屏、修复了五笔方案音码'前辍输入和直接输入的词库不互通的问题、调整了主题和o快符
- 4.29：将中英标点开关改为英文候选词开关、恢复了英文候选词（在音码开关/英文开关/翻译开关开启时）、移除了音码和五笔句开关同时开启时的五笔逐字候选、取消拼音滤镜单字限制、默认关闭了五笔句方案音码开关
- 4.28：新增同文自定义按键音（字母朗读）功能
- 4.27：为候选移动lua添加编码识别，避免了同字候选在不同编码时仍然移动的问题、更改音码前缀为'（取消了'快符功能）
- 4.26：简纯-主题新增配色“简明”：可在backgrounds文件夹放入“background.png”作为同文键盘背景图片（或主题内更改指定名称）
- 4.25：跟随万象更新：候选移动，计算器/tip、微调了主题“简纯+”为“简纯-”（删除底行，删除q-p下滑数字，长按123进入菜单，空格左右移，开关字号）
- 4.19：将小字集滤镜的8105字符集更换为秃五笔版本、将音码前缀改为'`（单引号+反引号）、修复了五笔句方案无法打出多数1码音码字和少数2码字的问题、五笔句方案默认未开启音码开关、默认关闭了拼音方案的五笔开关、设置了快捷键Control+y开关音码
- 4.17：调整原码句编码为：最短首选编码，1码字有词打2码，无词后加_
- 4.15.5：修复了五笔句方案'分词功能
- 4.15.1：删除了原码句开关、移除其它音码辅助码选择 只保留了‘五笔首末’、新增'引号或`反引号后缀音码反查功能、将全局字符集过滤改为单字字符集过滤、恢复了开启五笔句时组句单字的候选词资格
- 4.5：修复了wubi方案‘音码候选词辅助码调序和注释显示’功能、调整了部分配置文本
- 4.4.10：设定双击'或单击`重复上屏、设置快符oe为反引号
- 4.3.23：设定双击'或`重复上屏、调整了o快符
- 4.3.21：添加了秃五笔的快符、补充了一个词典
- 4.2.20：修复了部分/引导的快符失效的问题
- 4.2.1：恢复了万象方案五笔句性能
- 3.31.17：优化了大字集关闭时因为过滤了含有生僻字的句子而导致的五笔句缺失问题、默认方案改为五笔(五笔句优化)设置tag过滤了四码以下不完全匹配单字、并为该方案引用了万象方案配置的音码user_dict_set、设置了音码开关
- 3.25.1：新增方案 五笔（纯五笔 五笔句优化）、设置了快捷键Control+z开关五笔单/Control+a开关五笔词/Control+s开关五笔句/Control+m显示拆分、默认在翻译开关关闭时关闭英文候选词
- 3.23.3：修复了五笔词/五笔单之间的权重排序功能、移除了置顶组句开关
- 3.22.5：解决了ach自造词与`部件组字功能失效的问题、解决了㛚被划分为符号组的问题、将两码/原码句的主次选排序共存改为不共存、将五笔词典的wubi版单字改为wubici版单字、将五笔字五笔词开关同时开启时的字词顺序由 字在词前 调整为词典内部权重顺序、新增u编开关、更换快符〔〕为[]、新增预测功能开关
- 3.17.8：新增了tips开关功能、默认 基本的6码3字不调频、常用字滤镜补充
- 3.5.21：将句词单的输出顺序调整为单词句、将快符ov\划为符号组
- 3.1.21：将一简词的输出顺序放在了一简字之后
- 2.28.4：改造整句词典，为两码整句添加了加码纠错能力、优化了两码句/原码句开关，解决了相同码长时切换首选无效的问题、新增了一简词开关
- 2.24.7：改良整句词典实现两码整句，与含有常规字词的原码整句共存，根据开关状态决定排序、缩减常用字过滤字集为8105
- 2.23.4：因为万象原本的字符集过滤lua不过滤句中生僻字，为了避免对五笔整句的影响，换成了core2022
- 2.23.2：为五笔词添加了简词、相对调低了24个同权重码词条权重、分离了五笔整句，为整句词典添加了二码单字
- 2.22.2：更换custom_phrase/user_dict的txt为custom_phrase/dictionary的dict.yaml，解决了txt无法根据同权重词条上下顺序排序的问题、删除了两个ox快符
- 2.20.18：解决了某些候选字错误的被归类为符号组的问题
- 2.20.4：修复了加入五笔整句后 五笔单五笔词异常置顶 不让位于双拼词的问题
- 2.19.24：修复了加入五笔整句后 无法使用符号上屏的问题
- 2.19.23：新增了五笔整句功能
- 2.18.23：将五笔单、五笔词开关同时开启时 五笔词的顺序放在了五笔单之前
- 2.18.21：将其它形码单字词典加了词，从方案移到了群文件
- 2.18.14：继续简化了lua逻辑
- 2.17.23：解决了快符被开关关闭的问题，简化了lua逻辑
- 2.17.21：调整了滤镜顺序
- 2.17.1：新增了置顶组句开关
- 2.16.15：默认开启了音码调频，略微调整了快符，简化了custom.yaml
- 2.14.15：新增了五笔词和五笔词开关

---